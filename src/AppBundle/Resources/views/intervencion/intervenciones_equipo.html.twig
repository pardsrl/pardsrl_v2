{% extends 'base.html.twig' %}

{% set __title = 'Intervenciones realizadas por el equipo ' ~ equipo %}

{% block content %}
  <div class="row">
    <div class="col-xs-12">

      <div class="box box-primary">
        <div class="box-body">
          <div class="row">
            <div class="col-md-6">
              <!-- form start -->
              {{ form_start(form) }}
              {{ form_row(form.accionDesc) }}
              <div class="form-group">
                  {{ form_label(form.fecha) }}
                  <div class="col-sm-10">
                      <div id="intervencion_fecha" class="form-inline">
                          {{ form_widget(form.fecha.date, { 'attr': { 'class': 'datepicker' } }) }}
                          {{ form_widget(form.fecha.time.hour) }}
                          {{ form_widget(form.fecha.time.minute) }}
                          {{ form_errors(form.fecha) }}
                      </div>
                  </div>
              </div>
              {% set pozoClass = "" %}

              {% if form.pozoDesc is defined %}
                  {% set pozoClass =  "hidden" %}
                  {{ form_row(form.pozoDesc) }}
              {% endif %}

              <div class="{{ pozoClass }}">
                  {{ form_row(form.pozo) }}
              </div>


              <div class="box-footer">
                  <input class="btn btn-primary" type="submit" value="Nueva Intervención"/>
              </div>

              {{ form_end(form) }}
            </div>
          </div>
        </div>
      </div>

      <div class="box">
        <div class="box-body table-responsive no-padding">
          <table class="table table-hover">
            <tbody>
              <tr>
                <th>ID</th>
                <th>Accion</th>
                <th>Pozo</th>
                <th>Yacimiento</th>
                <th>Compañía</th>
                <th>Fecha intervencion</th>
                <th>Registrado el día</th>
                <th>Creado Por</th>
              </tr>
              {% if intervenciones is empty %}
                <tr>
                  <td colspan="6">Hasta el momento no se han registrado intervenciones</td>
                </tr>
              {% endif %}
              {% for intervencion in intervenciones %}
                <tr>
                  <td>{{ intervencion.id }}</td>
                  <td>
                    {% if intervencion.accion == 0 %}
                      <span class="label label-success">Apertura</span>
                    {% else %}
                      <span class="label label-warning">Cierre</span>
                    {% endif %}
                  </td>
                  <td>{{ intervencion.pozo }}</td>
                  <td>{{ intervencion.pozo.yacimiento }}</td>
                  <td>{{ intervencion.pozo.yacimiento.compania }}</td>
                  <td>{{ intervencion.fecha is empty ? "" : intervencion.fecha | date('d/m/Y H:i:s') }}</td>
                  <td>{{ intervencion.fechaCreacion | date('d/m/Y H:i:s') }}</td>
                  <td>{{ intervencion.creadoPor }}</td>
                </tr>
              {% endfor %}

            </tbody>
          </table>
        </div>
        <!-- /.box-body -->
      </div>
      <!-- /.box -->
      {{ knp_pagination_render(intervenciones) }}
    </div>
  </div>

{% endblock %}
